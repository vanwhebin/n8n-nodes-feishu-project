# é£ä¹¦é¡¹ç›® N8N é›†æˆæ’ä»¶

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![N8N](https://img.shields.io/badge/platform-N8N-brightgreen.svg)
![TypeScript](https://img.shields.io/badge/language-TypeScript-blue.svg)
![Node.js](https://img.shields.io/badge/node-%3E%3D20.15-green.svg)

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ N8N è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç”¨äºé›†æˆé£ä¹¦é¡¹ç›® (Feishu Project) APIï¼Œæ”¯æŒå·¥ä½œé¡¹ç®¡ç†ã€ç©ºé—´ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€é™„ä»¶å¤„ç†ç­‰å…¨æ–¹ä½åŠŸèƒ½ã€‚

## ğŸš€ ç‰¹æ€§

- âœ… **16ä¸ªåŠŸèƒ½æ¨¡å—**ï¼Œè¦†ç›–é£ä¹¦é¡¹ç›®çš„ä¸»è¦APIåŠŸèƒ½
- âœ… **73ä¸ªæ“ä½œ**ï¼Œæ”¯æŒå®Œæ•´çš„å·¥ä½œæµè‡ªåŠ¨åŒ–
- âœ… **å®‰å…¨è®¤è¯**ï¼Œè‡ªåŠ¨ç®¡ç†æ’ä»¶Tokenå’Œç”¨æˆ·è®¤è¯
- âœ… **æ–‡ä»¶ä¸Šä¼ **ï¼Œæ”¯æŒå¤šç§æ ¼å¼çš„é™„ä»¶ç®¡ç†
- âœ… **ç»Ÿä¸€å‚æ•°**ï¼Œé‡‡ç”¨JSONæ ¼å¼çš„ä¸€è‡´æ€§å‚æ•°è®¾è®¡
- âœ… **é”™è¯¯å¤„ç†**ï¼Œå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œç”¨æˆ·æç¤º
- âœ… **TypeScriptæ”¯æŒ**ï¼Œå®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ™ºèƒ½æç¤º

## ğŸ“¦ å®‰è£…

### æ–¹å¼ä¸€ï¼šNPM å®‰è£… (æ¨è)

```bash
npm install @luka-cat-mimi/n8n-nodes-feishu-project
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½é¡¹ç›®åˆ°æœ¬åœ°
2. ç¼–è¯‘é¡¹ç›®

```bash
npm install
npm run build
```

1. å°†ç¼–è¯‘åçš„æ–‡ä»¶å¤åˆ¶åˆ° N8N çš„ `custom` ç›®å½•

## âš™ï¸ é…ç½®

### 1. åˆ›å»ºå‡­æ®

åœ¨ N8N ä¸­åˆ›å»ºæ–°çš„ "é£ä¹¦é¡¹ç›® API" å‡­æ®ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **é£ä¹¦é¡¹ç›®host** | é£ä¹¦é¡¹ç›®çš„åŸºç¡€hoståœ°å€ | `project.feishu.cn` |
| **æ’ä»¶ID** | é£ä¹¦é¡¹ç›®æ’ä»¶çš„ID | `MII_0000000000000000` |
| **æ’ä»¶å¯†é’¥** | é£ä¹¦é¡¹ç›®æ’ä»¶çš„å¯†é’¥ | `AB92E56666CT8D60704743BF69C92C16` |
| **ç”¨æˆ·ID** | ç”¨æˆ·çš„å”¯ä¸€IDï¼Œç”¨äºX-USER-KEYå¤´éƒ¨ | `7568516887894324252` |

### 2. è·å–å‡­æ®ä¿¡æ¯

#### æ’ä»¶IDå’Œæ’ä»¶å¯†é’¥

1. ç™»å½•é£ä¹¦é¡¹ç›®ç®¡ç†åå°
2. è¿›å…¥æ’ä»¶ç®¡ç†é¡µé¢
3. æŸ¥çœ‹æˆ–åˆ›å»ºæ’ä»¶ï¼Œè·å–æ’ä»¶IDå’Œå¯†é’¥

#### ç”¨æˆ·ID

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. ç™»å½•é£ä¹¦é¡¹ç›®
3. åœ¨ç½‘ç»œè¯·æ±‚ä¸­æŸ¥çœ‹ `X-USER-KEY` å¤´éƒ¨ä¿¡æ¯

## ğŸ“Š åŠŸèƒ½æ¨¡å—

### æ ¸å¿ƒåŠŸèƒ½

| æ¨¡å— | æ“ä½œæ•° | ä¸»è¦åŠŸèƒ½ |
|------|--------|----------|
| ğŸ” **æ’ä»¶ç›¸å…³** | 1 | è·å–plugin_token |
| ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** | 4 | ç”¨æˆ·æŸ¥è¯¢ã€æœç´¢ã€ç”¨æˆ·ç»„ç®¡ç† |
| ğŸ¢ **ç©ºé—´ç®¡ç†** | 5 | ç©ºé—´åˆ—è¡¨ã€è¯¦æƒ…ã€ä¸šåŠ¡çº¿ã€å›¢é˜Ÿæˆå‘˜ |
| ğŸ“ **é™„ä»¶ç®¡ç†** | 4 | æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€é™„ä»¶æ·»åŠ åˆ é™¤ |

### å·¥ä½œé¡¹åŠŸèƒ½

| æ¨¡å— | æ“ä½œæ•° | ä¸»è¦åŠŸèƒ½ |
|------|--------|----------|
| ğŸ” **å·¥ä½œé¡¹å®ä¾‹æœç´¢** | 5 | å•ç©ºé—´ã€è·¨ç©ºé—´ã€å¤æ‚æœç´¢ã€å…¨å±€æœç´¢ |
| ğŸ“ **å·¥ä½œé¡¹å®ä¾‹è¯»å†™** | 16 | CRUDæ“ä½œã€æ‰¹é‡æ›´æ–°ã€çŠ¶æ€ç®¡ç†ã€è¯„å®¡ç®¡ç† |
| âš™ï¸ **å·¥ä½œé¡¹é…ç½®** | 9 | åŸºç¡€ä¿¡æ¯ã€å­—æ®µé…ç½®ã€å…³è”é…ç½® |
| ğŸ”— **ç©ºé—´å…³è”** | 4 | å…³è”è§„åˆ™ã€å·¥ä½œé¡¹ç»‘å®šè§£ç»‘ |

### æµç¨‹ç®¡ç†

| æ¨¡å— | æ“ä½œæ•° | ä¸»è¦åŠŸèƒ½ |
|------|--------|----------|
| ğŸ”„ **æµç¨‹ä¸èŠ‚ç‚¹** | 5 | æµç¨‹è¯¦æƒ…ã€èŠ‚ç‚¹æ›´æ–°ã€çŠ¶æ€å˜æ›´ |
| ğŸ“‹ **æµç¨‹é…ç½®** | 5 | æµç¨‹æ¨¡æ¿ç®¡ç†ã€é…ç½®æ›´æ–° |
| ğŸ‘¤ **è§’è‰²ä¸äººå‘˜é…ç½®** | 1 | æµç¨‹è§’è‰²ç®¡ç† |

### åä½œåŠŸèƒ½

| æ¨¡å— | æ“ä½œæ•° | ä¸»è¦åŠŸèƒ½ |
|------|--------|----------|
| ğŸ“Œ **å­ä»»åŠ¡** | 6 | å­ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç† |
| ğŸ‘ï¸ **è§†å›¾** | 8 | è§†å›¾é…ç½®ã€å·¥ä½œé¡¹å±•ç¤º |
| ğŸ’¬ **è¯„è®º** | 4 | è¯„è®ºCRUDæ“ä½œ |
| ğŸ‘¥ **ç¾¤ç»„** | 1 | æœºå™¨äººåŠ å…¥èŠå¤© |
| ğŸ“ˆ **åº¦é‡** | 1 | å›¾è¡¨è¯¦æƒ… |

## ğŸ› ï¸ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

1. **æ·»åŠ é£ä¹¦é¡¹ç›®èŠ‚ç‚¹**åˆ°å·¥ä½œæµ
2. **é€‰æ‹©èµ„æºç±»å‹**ï¼ˆå¦‚"ç”¨æˆ·ç®¡ç†"ï¼‰
3. **é€‰æ‹©å…·ä½“æ“ä½œ**ï¼ˆå¦‚"æœç´¢ç§Ÿæˆ·å†…çš„ç”¨æˆ·åˆ—è¡¨"ï¼‰
4. **é…ç½®å‚æ•°**ï¼š
   - è·¯å¾„å‚æ•°ï¼šç›´æ¥å¡«å…¥ï¼ˆå¦‚é¡¹ç›®KEYï¼‰
   - è¯·æ±‚ä½“å‚æ•°ï¼šJSONæ ¼å¼ï¼Œæœ‰é»˜è®¤å€¼

### ç”¨æˆ·æŸ¥è¯¢ç¤ºä¾‹

```json
{
  "user_keys": ["7568516887894324252"],
  "out_ids": [],
  "emails": ["user@example.com"],
  "tenant_key": "your_tenant_key"
}
```

### å·¥ä½œé¡¹æœç´¢ç¤ºä¾‹

```json
{
  "work_item_name": "éœ€æ±‚",
  "user_keys": ["7568516887894324252"],
  "work_item_type_keys": ["story"],
  "page_num": 1,
  "page_size": 10,
  "expand": {
    "need_workflow": true,
    "need_user_detail": true
  }
}
```

### æ–‡ä»¶ä¸Šä¼ ç¤ºä¾‹

1. ä½¿ç”¨ "Read Binary File" èŠ‚ç‚¹è¯»å–æ–‡ä»¶
2. è¿æ¥åˆ° "é£ä¹¦é¡¹ç›®" èŠ‚ç‚¹
3. é€‰æ‹© "é™„ä»¶ç®¡ç†" > "æ–‡ä»¶ä¸Šä¼ "
4. è®¾ç½® `binaryPropertyName` ä¸º "data"ï¼ˆé»˜è®¤å€¼ï¼‰
5. å¡«å…¥é¡¹ç›®KEYç­‰è·¯å¾„å‚æ•°

## ğŸ”§ å¼€å‘

### é¡¹ç›®ç»“æ„

```text
n8n-nodes-feishu-project/
â”œâ”€â”€ credentials/                 # å‡­æ®å®šä¹‰
â”‚   â””â”€â”€ FeishuProjectApi.credentials.ts
â”œâ”€â”€ nodes/                      # èŠ‚ç‚¹å®šä¹‰
â”‚   â””â”€â”€ FeishuProject/
â”‚       â”œâ”€â”€ FeishuProject.node.ts
â”‚       â””â”€â”€ resource/           # èµ„æºæ¨¡å—
â”‚           â”œâ”€â”€ user/           # ç”¨æˆ·ç®¡ç†
â”‚           â”œâ”€â”€ space/          # ç©ºé—´ç®¡ç†
â”‚           â”œâ”€â”€ attachment/     # é™„ä»¶ç®¡ç†
â”‚           â””â”€â”€ ...            # å…¶ä»–æ¨¡å—
â””â”€â”€ package.json
```

### æ„å»ºå‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»º
npm run build

# ä»£ç æ£€æŸ¥
npm run lint

# æ ¼å¼åŒ–ä»£ç 
npm run format
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `nodes/FeishuProject/resource/` ä¸‹åˆ›å»ºæ–°æ¨¡å—æ–‡ä»¶å¤¹
2. åˆ›å»ºèµ„æºå®šä¹‰æ–‡ä»¶ `ModuleResource.ts`
3. åœ¨æ¨¡å—æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ“ä½œæ–‡ä»¶ `OperateFile.ts`
4. ä½¿ç”¨ç»Ÿä¸€çš„å‚æ•°æ¨¡å¼ï¼šè·¯å¾„å‚æ•° + JSONè¯·æ±‚ä½“

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚è§ [LICENSE](LICENSE.md) æ–‡ä»¶ã€‚

## ğŸ†˜ æ”¯æŒ

- ğŸ“§ é‚®ç®±ï¼š**luka.cat.mimi@gmail.com**
- ğŸ› é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/luka-n8n-nodes/n8n-nodes-feishu-project/issues)
- ğŸ“– é£ä¹¦é¡¹ç›®APIæ–‡æ¡£ï¼š[å®˜æ–¹æ–‡æ¡£](https://project.feishu.cn/b/helpcenter/1p8d7djs/4bsmoql6)

## â­ è‡´è°¢

æ„Ÿè°¢ [N8N](https://n8n.io/) æä¾›çš„å¼ºå¤§è‡ªåŠ¨åŒ–å¹³å°ï¼Œä»¥åŠé£ä¹¦é¡¹ç›®å›¢é˜Ÿæä¾›çš„å®Œå–„APIæ¥å£ã€‚

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª â­ï¸ï¼
